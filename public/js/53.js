(self.webpackChunk=self.webpackChunk||[]).push([[53],{9053:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>n});var o=e(629);e(1263),e(122);function r(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,o)}return e}function s(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}const i={name:"createStoreLocationProduct",data:function(){return{pagination:{},boxes:[],boxPagination:{},box_search:"",storage_locations:[],storageLocationPagination:{},storage_location_search:"",isLoad:!1,param_storage_location_product_id:this.$route.params.storage_location_product_id,isViewCreate:this.$route.params.flag,formData:{},formCreateData:{section_number:"",section_place:"",section_scan:"",rack_number:"",rack_place:"",rack_scan:"",storage_location_id:null,storage_location_product_id:null,box_id:null,store_id:0,box_name:"",storage_location_name:""},create_errors:{},edit_errors:{},errors:{},lastValue:"",lastCollection:"",timer:null}},computed:function(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?r(Object(e),!0).forEach((function(a){s(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}({},(0,o.rn)({cur_store_id:function(t){return t.select_store_id}})),methods:{resetFormCreate:function(){this.formCreateData.storage_location_product_id=null,this.formCreateData.store_id=0,this.formCreateData.storage_location_id=null,this.formCreateData.box_id=null,this.formCreateData.section_number="",this.formCreateData.section_place="",this.formCreateData.section_scan="",this.formCreateData.rack_number="",this.formCreateData.rack_place="",this.formCreateData.rack_scan="",this.formCreateData.box_name="",this.formCreateData.storage_location_name=""},sendData:function(){this.isViewCreate?(console.log("sendStorageLocationProduct"),this.sendCreateStorageLocationProduct()):(console.log("sendStorageLocationProduct"),this.sendEditStorageLocationProduct())},sendCreateStorageLocationProduct:function(){var t=this,a=localStorage.getItem("token");this.formCreateData.store_id=this.cur_store_id,axios.defaults.headers.common.Authorization="Bearer "+a,axios.post("/api/create_storage_location_product",this.formCreateData).then((function(a){t.resetFormCreate(),t.$router.push("/storage-location-products-list")})).catch((function(a){t.create_errors=a.response.data.errors}))},sendEditStorageLocationProduct:function(){var t=this,a=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+a,this.formCreateData.storage_location_product_id=this.param_storage_location_product_id,axios.post("/api/update_storage_location_product",this.formCreateData).then((function(a){t.resetFormCreate(),t.$router.push("/storage-location-products-list")})).catch((function(a){t.create_errors=a.response.data.errors}))},getDetailStorageLocationProduct:function(){var t=this,a=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+a,axios.post("/api/detail_storage_location_product_info",{storage_location_product_id:this.param_storage_location_product_id,store_id:this.cur_store_id}).then((function(a){t.formCreateData.section_number=a.data.storage_location_product.section_number,t.formCreateData.section_place=a.data.storage_location_product.section_place,t.formCreateData.section_scan=a.data.storage_location_product.section_scan,t.formCreateData.rack_number=a.data.storage_location_product.rack_number,t.formCreateData.rack_place=a.data.storage_location_product.rack_place,t.formCreateData.rack_scan=a.data.storage_location_product.rack_scan,t.formCreateData.storage_location_id=a.data.storage_location_product.storage_location_id,t.formCreateData.box_id=a.data.storage_location_product.box_id,t.formCreateData.box_name=a.data.storage_location_product.box_name,t.formCreateData.storage_location_name=a.data.storage_location_product.storage_location_name})).catch((function(a){t.create_errors=a.response.data.errors}))},makePagination:function(t,a){var e={current_page:t.current_page,last_page:t.last_page,prev_page_url:t.prev_page_url,next_page_url:t.next_page_url};"boxes"===a&&(this.boxPagination=e),"storage_locations"===a&&(this.storageLocationPagination=e)},showSelectBox:function(){this.getBoxes(),$(this.$refs.modal2).modal("show")},selectBox:function(t,a){this.formCreateData.box_id=t,this.formCreateData.box_name=a,$(this.$refs.modal2).modal("hide")},getBoxes:function(t){var a=this,e=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+e,t=t||"/api/get_box_list",console.log(t);var o={store_id:this.cur_store_id,box_search:this.box_search};axios.post(t,o).then((function(t){console.log("boxes length:"+t.data.boxes.data.length),a.boxes=t.data.boxes.data,a.makePagination(t.data.boxes,"boxes")})).catch((function(t){console.log(t)}))},showSelectStorageLocation:function(){this.getStorageLocations(),$(this.$refs.modal3).modal("show")},selectStorageLocation:function(t,a){this.formCreateData.storage_location_id=t,this.formCreateData.storage_location_name=a,$(this.$refs.modal3).modal("hide")},getStorageLocations:function(t){var a=this,e=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+e,t=t||"/api/get_storage_location_list",console.log(t);var o={store_id:this.cur_store_id,storage_location_search:this.storage_location_search};axios.post(t,o).then((function(t){a.storage_locations=t.data.storage_locations.data,a.makePagination(t.data.storage_locations,"storage_locations")})).catch((function(t){console.log(t)}))},startTimer:function(){var t=this;this.timer=setInterval((function(){"boxes"===t.lastCollection&&t.getBoxes(),"storage_locations"===t.lastCollection&&t.getStorageLocations(),t.stopTimer()}),1e3)},stopTimer:function(){clearTimeout(this.timer)},changeValueInput:function(t,a){this.lastValue=t.target.value,this.lastCollection=a,this.stopTimer(),this.startTimer()}},mounted:function(){this.isViewCreate||this.getDetailStorageLocationProduct()}};const n=(0,e(1900).Z)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[t.isViewCreate?e("h2",[t._v("\n        Создание место хранения продукта \n    ")]):t._e(),t._v(" "),t.isViewCreate?t._e():e("h2",[t._v('\n        Редактируем место хранения продукта: "'+t._s(t.formCreateData.section_number)+'" \n    ')]),t._v(" "),e("div",{ref:"modal2",staticClass:"modal fade",attrs:{id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel2","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("label",{attrs:{for:"box_search"}},[t._v("Коробки")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.box_search,expression:"box_search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search",name:"box_search"},domProps:{value:t.box_search},on:{input:[function(a){a.target.composing||(t.box_search=a.target.value)},function(a){return t.changeValueInput(a,"boxes")}]}}),t._v(" "),t._l(t.boxes,(function(a){return e("div",{key:a.id,staticClass:"row"},[e("div",{staticClass:"col-3"},[t._v(t._s(a.number))]),t._v(" "),e("div",{staticClass:"col-1"},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.selectBox(a.id,a.number)}}},[t._v("Выбрать")])])])})),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"}),t._v(" "),e("div",{staticClass:"col-4"},[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.boxPagination.prev_page_url},on:{click:function(a){return a.preventDefault(),t.getBoxes(t.boxPagination.prev_page_url)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Предыдущая")])]),t._v(" "),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("\n                                        Страница "+t._s(t.boxPagination.current_page)+" из "+t._s(t.boxPagination.last_page)+"\n                                    ")])]),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.boxPagination.next_page_url},on:{click:function(a){return a.preventDefault(),t.getBoxes(t.boxPagination.next_page_url)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Следующая")])])])])]),t._v(" "),e("div",{staticClass:"col-4"})])],2),t._v(" "),e("div",{staticClass:"modal-footer"})])])]),t._v(" "),e("div",{ref:"modal3",staticClass:"modal fade",attrs:{id:"exampleModal3",tabindex:"-1","aria-labelledby":"exampleModalLabel3","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("label",{attrs:{for:"storage_location_search"}},[t._v("Места хранения")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.storage_location_search,expression:"storage_location_search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search",name:"storage_location"},domProps:{value:t.storage_location_search},on:{input:[function(a){a.target.composing||(t.storage_location_search=a.target.value)},function(a){return t.changeValueInput(a,"storage_locations")}]}}),t._v(" "),t._l(t.storage_locations,(function(a){return e("div",{key:a.id,staticClass:"row"},[e("div",{staticClass:"col-3"},[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"col-1"},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.selectStorageLocation(a.id,a.name)}}},[t._v("Выбрать")])])])})),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"}),t._v(" "),e("div",{staticClass:"col-4"},[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.storageLocationPagination.prev_page_url},on:{click:function(a){return a.preventDefault(),t.getStorageLocations(t.storageLocationPagination.prev_page_url)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Предыдущая")])]),t._v(" "),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("\n                                        Страница "+t._s(t.storageLocationPagination.current_page)+" из "+t._s(t.storageLocationPagination.last_page)+"\n                                    ")])]),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.storageLocationPagination.next_page_url},on:{click:function(a){return a.preventDefault(),t.getStorageLocations(t.storageLocationPagination.next_page_url)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Следующая")])])])])]),t._v(" "),e("div",{staticClass:"col-4"})])],2),t._v(" "),e("div",{staticClass:"modal-footer"})])])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"section_number"}},[t._v("Номер секции")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.section_number,expression:"formCreateData.section_number"}],staticClass:"form-control",attrs:{type:"text",name:"section_number"},domProps:{value:t.formCreateData.section_number},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"section_number",a.target.value)}}}),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.section_number)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"section_place"}},[t._v("Место секции")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.section_place,expression:"formCreateData.section_place"}],staticClass:"form-control",attrs:{type:"text",name:"section_place"},domProps:{value:t.formCreateData.section_place},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"section_place",a.target.value)}}}),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.section_place)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"section_scan"}},[t._v("Скан секции")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.section_scan,expression:"formCreateData.section_scan"}],staticClass:"form-control",attrs:{type:"text",name:"section_scan"},domProps:{value:t.formCreateData.section_scan},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"section_scan",a.target.value)}}}),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.section_scan)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"rack_number"}},[t._v("Номер стойки")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.rack_number,expression:"formCreateData.rack_number"}],staticClass:"form-control",attrs:{type:"text",name:"rack_number"},domProps:{value:t.formCreateData.rack_number},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"rack_number",a.target.value)}}}),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.rack_number)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"rack_place"}},[t._v("Место стойки")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.rack_place,expression:"formCreateData.rack_place"}],staticClass:"form-control",attrs:{type:"text",name:"rack_place"},domProps:{value:t.formCreateData.rack_place},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"rack_place",a.target.value)}}}),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.rack_place)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"rack_scan"}},[t._v("Скан стойки")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.rack_scan,expression:"formCreateData.rack_scan"}],staticClass:"form-control",attrs:{type:"text",name:"rack_scan"},domProps:{value:t.formCreateData.rack_scan},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"rack_scan",a.target.value)}}}),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.rack_scan)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.storage_location_name,expression:"formCreateData.storage_location_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Выбор место хранения","aria-label":"Выбор место хранения","aria-describedby":"button-addon2",readonly:""},domProps:{value:t.formCreateData.storage_location_name},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"storage_location_name",a.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon2"},on:{click:function(a){return t.showSelectStorageLocation()}}},[t._v("Список")]),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.storage_location_id)}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreateData.box_name,expression:"formCreateData.box_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Выбор коробки","aria-label":"Выбор коробки","aria-describedby":"button-addon2",readonly:""},domProps:{value:t.formCreateData.box_name},on:{input:function(a){a.target.composing||t.$set(t.formCreateData,"box_name",a.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon2"},on:{click:function(a){return t.showSelectBox()}}},[t._v("Список")]),t._v(" "),e("p",{staticClass:"text-danger",domProps:{textContent:t._s(t.create_errors.box_id)}})]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[t.isViewCreate?e("button",{staticClass:"btn btn-primary",on:{click:t.sendData}},[t._v("Создать")]):t._e(),t._v(" "),t.isViewCreate?t._e():e("button",{staticClass:"btn btn-primary",on:{click:t.sendData}},[t._v("Сохранить")])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel2"}},[t._v("Выбор коробки")])]),t._v(" "),e("div",{staticClass:"col-6"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel3"}},[t._v("Выбор места хранения")])]),t._v(" "),e("div",{staticClass:"col-6"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])])])}],!1,null,null,null).exports}}]);