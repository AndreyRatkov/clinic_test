(self.webpackChunk=self.webpackChunk||[]).push([[982],{7982:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});a(1263),a(122);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o={name:"TelephonesList",data:function(){return{telephones:{},pagination:{},remove_telephon_name:"",remove_telephon_id:0,errors:{}}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,a(629).rn)({cur_store_name:function(e){return e.select_store_name},cur_store_id:function(e){return e.select_store_id}})),methods:{getTelephones:function(e){var t=this,a=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+a,e=e||"api/get_telephon_list",axios.post(e,{store_id:this.cur_store_id}).then((function(e){console.log("telephones length:"+e.data.telephones.data.length),t.telephones=e.data.telephones.data,t.makePagination(e.data.telephones)})).catch((function(e){console.log(e)}))},makePagination:function(e){var t={current_page:e.current_page,last_page:e.last_page,prev_page_url:e.prev_page_url,next_page_url:e.next_page_url};this.pagination=t},showRemoveModal:function(e,t){this.remove_telephon_name=t,this.remove_telephon_id=e,$(this.$refs.modal2).modal("show")},removeTelephon:function(){var e=this,t=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+t;var a={telephon_id:this.remove_telephon_id};axios.post("/api/remove_telephon",a).then((function(t){$(e.$refs.modal2).modal("hide"),e.getTelephones()})).catch((function(t){e.create_errors=t.response.data.errors}))}},mounted:function(){this.getTelephones()}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h2",[e._v("Телефонные номера")]),e._v(" "),a("div",{ref:"modal2",staticClass:"modal fade",attrs:{id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel2","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),a("div",{staticClass:"modal-body"},[e._v("\n                    Вы уверены, что хотите удалить номер телефона:"+e._s(e.remove_telephon_name)+"?\n                ")]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.removeTelephon}},[e._v("Удаление")])])])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("router-link",{attrs:{to:{name:"create-telephon",params:{flag:!0}}}},[e._v("Добавление телефона")])],1)]),e._v(" "),e._m(1),e._v(" "),e._l(e.telephones,(function(t){return a("div",{key:t.id,staticClass:"row"},[a("div",{staticClass:"col-4"},[e._v(e._s(t.title))]),e._v(" "),a("div",{staticClass:"col-4"},[e._v(e._s(t.phone))]),e._v(" "),a("div",{staticClass:"col-2"},[a("router-link",{attrs:{to:{name:"edit-telephon",params:{flag:!1,telephon_id:t.id}}}},[e._v("редактировать")])],1),e._v(" "),a("div",{staticClass:"col-2"},[a("a",{attrs:{href:"#"},on:{click:function(a){return e.showRemoveModal(t.id,t.title)}}},[e._v("удалить")])])])})),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"}),e._v(" "),a("div",{staticClass:"col-4"},[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!e.pagination.prev_page_url},on:{click:function(t){return t.preventDefault(),e.getTelephones(e.pagination.prev_page_url)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("Предыдущая")])]),e._v(" "),a("li",{staticClass:"page-item disabled"},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("\n                        Страница "+e._s(e.pagination.current_page)+" из "+e._s(e.pagination.last_page)+"\n                    ")])]),e._v(" "),a("li",{staticClass:"page-item",class:{disabled:!e.pagination.next_page_url},on:{click:function(t){return t.preventDefault(),e.getTelephones(e.pagination.next_page_url)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[e._v("Следующая")])])])])]),e._v(" "),a("div",{staticClass:"col-4"})])],2)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel2"}},[e._v("Удаление номера телефона")])]),e._v(" "),a("div",{staticClass:"col-6"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[e._v("Заголовок")]),e._v(" "),a("div",{staticClass:"col-4"},[e._v("Номер телефона")]),e._v(" "),a("div",{staticClass:"col-4"},[e._v("Действия")])])}],!1,null,null,null).exports}}]);