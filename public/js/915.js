(self.webpackChunk=self.webpackChunk||[]).push([[915],{4915:(s,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>r});e(1263),e(122);function a(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),e.push.apply(e,a)}return e}function i(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}const l={name:"DisassembliesList",data:function(){return{disassemblies:{},pagination:{},remove_disassembly_name:"",remove_disassembly_id:0,errors:{}}},computed:function(s){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach((function(t){i(s,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))}))}return s}({},(0,e(629).rn)({cur_store_name:function(s){return s.select_store_name},cur_store_id:function(s){return s.select_store_id}})),methods:{getDisassemblies:function(s){var t=this,e=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+e,s=s||"api/get_disassembly_list",axios.post(s,{store_id:this.cur_store_id}).then((function(s){console.log("disassemblies length:"+s.data.disassemblies.data.length),t.disassemblies=s.data.disassemblies.data,t.makePagination(s.data.disassemblies)})).catch((function(s){console.log(s)}))},makePagination:function(s){var t={current_page:s.current_page,last_page:s.last_page,prev_page_url:s.prev_page_url,next_page_url:s.next_page_url};this.pagination=t},showRemoveModal:function(s,t){this.remove_disassembly_name=t,this.remove_disassembly_id=s,$(this.$refs.modal2).modal("show")},removeDisassembly:function(){var s=this,t=localStorage.getItem("token");axios.defaults.headers.common.Authorization="Bearer "+t;var e={disassembly_id:this.remove_disassembly_id};axios.post("/api/remove_disassembly",e).then((function(t){$(s.$refs.modal2).modal("hide"),s.getDisassemblies()})).catch((function(t){s.create_errors=t.response.data.errors}))}},mounted:function(){this.getDisassemblies()}};const r=(0,e(1900).Z)(l,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"container"},[e("h2",[s._v("Разборки")]),s._v(" "),e("div",{ref:"modal2",staticClass:"modal fade",attrs:{id:"exampleModal2",tabindex:"-1","aria-labelledby":"exampleModalLabel2","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[s._m(0),s._v(" "),e("div",{staticClass:"modal-body"},[s._v("\n                    Вы уверены, что хотите удалить разборку:"+s._s(s.remove_disassembly_name)+"?\n                ")]),s._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:s.removeDisassembly}},[s._v("Удаление")])])])])]),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("router-link",{attrs:{to:{name:"create-disassembly",params:{flag:!0}}}},[s._v("Создание разборки")])],1)]),s._v(" "),s._m(1),s._v(" "),s._l(s.disassemblies,(function(t){return e("div",{key:t.id,staticClass:"row"},[e("div",{staticClass:"col-2"},[s._v(s._s(t.model))]),s._v(" "),e("div",{staticClass:"col-2"},[s._v(s._s(t.modification))]),s._v(" "),e("div",{staticClass:"col-4"},[s._v(s._s(t.year_issue))]),s._v(" "),e("div",{staticClass:"col-2"},[e("router-link",{attrs:{to:{name:"edit-disassembly",params:{flag:!1,disassembly_id:t.id}}}},[s._v("редактировать")])],1),s._v(" "),e("div",{staticClass:"col-2"},[e("a",{attrs:{href:"#"},on:{click:function(e){return s.showRemoveModal(t.id,t.model)}}},[s._v("удалить")])])])})),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"}),s._v(" "),e("div",{staticClass:"col-4"},[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!s.pagination.prev_page_url},on:{click:function(t){return t.preventDefault(),s.getDisassemblies(s.pagination.prev_page_url)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[s._v("Предыдущая")])]),s._v(" "),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[s._v("\n                        Страница "+s._s(s.pagination.current_page)+" из "+s._s(s.pagination.last_page)+"\n                    ")])]),s._v(" "),e("li",{staticClass:"page-item",class:{disabled:!s.pagination.next_page_url},on:{click:function(t){return t.preventDefault(),s.getDisassemblies(s.pagination.next_page_url)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[s._v("Следующая")])])])])]),s._v(" "),e("div",{staticClass:"col-4"})])],2)}),[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"modal-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel2"}},[s._v("Удаление разборки")])]),s._v(" "),e("div",{staticClass:"col-6"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[s._v("×")])])])])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-2"},[s._v("Модель")]),s._v(" "),e("div",{staticClass:"col-2"},[s._v("Модификация")]),s._v(" "),e("div",{staticClass:"col-4"},[s._v("Год выпуска")]),s._v(" "),e("div",{staticClass:"col-4"},[s._v("Действия")])])}],!1,null,null,null).exports}}]);